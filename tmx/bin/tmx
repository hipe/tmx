#!/usr/bin/env ruby -w

require 'skylab/tmx'

_client_class = Skylab::TMX::CLI

_pn_s_a = [ ::File.basename( $PROGRAM_NAME ) ]

cli = _client_class.new $stdin, $stdout, $stderr, _pn_s_a

cli.json_file_stream_by do |&p|
  Skylab::TMX.development_directory_json_file_stream__( & p )
end

d = cli.invoke ARGV

if d.nonzero?
  $stderr.puts "(exitstatus: #{ d })"
end

exit d
