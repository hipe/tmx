#!/usr/bin/env bash


# a folder with a bunch of patches in it, basically do a
# tar on it.

dir="$1"

if [ -z "$dir" ] ; then
  echo "please provide a directory name"
  exit 0
fi

if [ ! -d "$dir" ] ; then
  echo "expecting a directory with patches in it - $dir"
  exit 0
fi

tgt="${dir}.big-patch.patch"

if [ -e "$tgt" ] ; then
  echo "won't overwrite existing big patch - $tgt"
  exit 0
fi

echo "writing $tgt"

find "$dir" -type f | while read line ; do cat "$line" >> "$tgt" ; done

echo "wrote $tgt"
