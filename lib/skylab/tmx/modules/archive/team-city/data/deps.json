{
  "external dependencies" : [
    {
      "name" : "java",
      "target" : {
        "version from"     : "java -version",
        "must be in range" : "1.5+",
        "parse with"       : "/java version \"([^\"]+)\"/",
        "presupposes"      : "java"
      },
      "java" : {
        "executable"       : "java"
      }
    },
    {
      "name" : "team city",
      "target" : {
        "move to"         : "/usr/local/{stem}",
        "from"            : "{build_dir}/{stem}",
        "else"            : "unzip"
      },
      "unzip" : {
        "unzip tarball"   : "{build_dir}/{basename}",
        "unzips to"       : "{stem}",
        "else"            : "download"
      },
      "download" : {
        "tarball to"      : "{build_dir}/{basename}",
        "from"            : "http://download.jetbrains.com/teamcity",
        "get"             : "TeamCity-6.5.3.tar.gz",
        "stem"            : "TeamCity"
      }
    },
    {
      "name"   : "tomcat",
      "target" : {
        "executable file" : "/usr/local/tomcat/bin/startup.sh",
        "else"            : "symlink",
        "enabled"         : false
      },
      "version" : {
        "version from"    : "/usr/local/tomcat/bin/version.sh",
        "parse with"      : "/^Server version: +(.+)$/"
      },
      "symlink" : {
        "symlink"         : "/usr/local/tomcat",
        "target"          : "/usr/local/{stem}",
        "else"            : "move"
      },
      "move" : {
        "move to"         : "/usr/local/{stem}",
        "from"            : "{build_dir}/{stem}",
        "else"            : "unzip"
      },
      "unzip" : {
        "unzip tarball"   : "{build_dir}/{basename}",
        "else"            : "download"
      },
      "download"          : {
        "tarball to"      : "{build_dir}/{basename}",
        "from"            : "http://apache.opensourceresources.org/tomcat/tomcat-6/v6.0.33/bin",
        "get"             : "apache-tomcat-6.0.33.tar.gz"
      }
    }
  ]
}
