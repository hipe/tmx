#!/usr/bin/env ruby -w

require 'skylab/doc_test'

Skylab::Doc_test = -> i, o, e, pn_s_a, argv do

  _cli = Skylab::DocTest::CLI.new i, o, e, pn_s_a do |cli_|

    cli_.filesystem_by do
      self._COVER_ME_probably_works
      Home_.lib_.system.filesystem
    end

    cli_.system_conduit_by do
      self._COVER_ME_probably_works
      Home_.lib_.system
    end
  end

  _cli.invoke argv
end

if __FILE__ == $PROGRAM_NAME
  d = Skylab::Doc_test[ $stdin, $stdout, $stderr, [ $PROGRAM_NAME ], ARGV ]
  if d.nonzero?
    $stderr.puts "(exitstatus: #{ d })"
  end
  exit d
end
