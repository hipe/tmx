#!/usr/bin/env ruby -w

require 'skylab/code_metrics'

_pn = ::File.basename $PROGRAM_NAME

x = Skylab::CodeMetrics::CLI.new(
  ARGV, $stdin, $stdout, $stderr, [ _pn ]
).execute

if x.respond_to? :id2name
  $stderr.puts "(result: #{ x })"
  x = 0
else
  if x.nonzero?
    $stderr.puts "(exitstatus: #{ x })"
  end
end
exit x
